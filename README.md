# ü§ñ Chatwoot AI Assistant with Auto-Crawling

–≠–Ω—ç –Ω—å Chatwoot-—Ç–∞–π —Ö–æ–ª–±–æ–≥–¥—Å–æ–Ω AI —Ç—É—Å–ª–∞—Ö –±”©–≥”©”©–¥ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —Å–∞–π—Ç —à“Ø“Ø—Ä–¥—ç–∂, –º—ç–¥—ç—ç–ª—ç–ª —Ö–∞–π—Ö –±–æ–ª–æ–º–∂—Ç–æ–π.

## ‚ú® –û–Ω—Ü–ª–æ–≥—É—É–¥

### üöÄ –ê–≤—Ç–æ–º–∞—Ç —à“Ø“Ø—Ä–¥—ç–ª—Ç

- Server —ç—Ö–ª—ç—Ö—ç–¥ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —Ç–æ—Ö–∏—Ä—É—É–ª—Å–∞–Ω —Å–∞–π—Ç—ã–≥ —à“Ø“Ø—Ä–¥—ç–Ω—ç
- –•—ç—Ä—ç–≥–ª—ç–≥—á `crawl` –∫–æ–º–∞–Ω–¥ ”©–≥”©—Ö–≥“Ø–π–≥—ç—ç—Ä –º—ç–¥—ç—ç–ª—ç–ª –±—ç–ª—ç–Ω –±–∞–π–Ω–∞
- Background thread –∞—à–∏–≥–ª–∞–Ω performance-–¥ –Ω”©–ª”©”©–ª”©—Ö–≥“Ø–π

### üß† –î—ç–≤—à–∏–ª—Ç—ç—Ç AI

- GPT-4.1 –∞—à–∏–≥–ª–∞–Ω –º–æ–Ω–≥–æ–ª —Ö—ç–ª—ç—ç—Ä —Ö–∞—Ä–∏—É–ª—Ç ”©–≥–¥”©–≥
- –Ø—Ä–∏–∞–≥ —Å–∞–Ω–∞–∂ “Ø–ª–¥–¥—ç–≥ (conversation memory)
- –®“Ø“Ø—Ä–¥—Å—ç–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–≥ –∫–æ–Ω—Ç–µ–∫—Å—Ç –±–æ–ª–≥–æ–Ω –∞—à–∏–≥–ª–∞–¥–∞–≥

### üîç –•–∞–π–ª—Ç—ã–Ω —Å–∏—Å—Ç–µ–º

- –®“Ø“Ø—Ä–¥—Å—ç–Ω –º—ç–¥—ç—ç–ª–ª—ç—ç—Å —Ö—É—Ä–¥–∞–Ω —Ö–∞–π–ª—Ç
- Title –±–æ–ª–æ–Ω –∞–≥—É—É–ª–≥–∞–∞—Å —Ö–∞–π–¥–∞–≥
- –¢–æ–≤—á snippet-—É—É–¥ —Ö–∞—Ä—É—É–ª–Ω–∞

## üõ†Ô∏è –¢–æ—Ö–∏—Ä–≥–æ–æ

### Environment Variables

`.env` —Ñ–∞–π–ª “Ø“Ø—Å–≥—ç–Ω –¥–∞—Ä–∞–∞—Ö —Ç–æ—Ö–∏—Ä–≥–æ–æ–≥ —Ö–∏–π–Ω—ç “Ø“Ø:

```bash
# Chatwoot —Ç–æ—Ö–∏—Ä–≥–æ–æ
CHATWOOT_API_KEY=your_chatwoot_api_key_here
ACCOUNT_ID=your_account_id_here
CHATWOOT_BASE_URL=https://app.chatwoot.com

# OpenAI —Ç–æ—Ö–∏—Ä–≥–æ–æ
OPENAI_API_KEY=your_openai_api_key_here

# –®“Ø“Ø—Ä–¥—ç–ª—Ç–∏–π–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ
ROOT_URL=https://docs.cloud.mn/
AUTO_CRAWL_ON_START=true
MAX_CRAWL_PAGES=50
DELAY_SEC=0.5
```

### –ê–≤—Ç–æ–º–∞—Ç —à“Ø“Ø—Ä–¥—ç–ª—Ç–∏–π–≥ –∏–¥—ç–≤—Ö–≥“Ø–π –±–æ–ª–≥–æ—Ö

```bash
AUTO_CRAWL_ON_START=false
```

## ü§ñ Comand—É—É–¥

### –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –∫–æ–º–∞–Ω–¥—É—É–¥

- `crawl` - –°–∞–π—Ç—ã–≥ —à“Ø“Ø—Ä–¥—ç—Ö (—Ö—ç—Ä—ç–≥—Ç—ç–π –±–æ–ª)
- `scrape <URL>` - –¢–æ–¥–æ—Ä—Ö–æ–π —Ö—É—É–¥–∞—Å —à“Ø“Ø—Ä–¥—ç—Ö
- `search <–∞—Å—É—É–ª—Ç>` - –ú—ç–¥—ç—ç–ª—ç–ª —Ö–∞–π—Ö
- `help` —ç—Å–≤—ç–ª `—Ç—É—Å–ª–∞–º–∂` - –¢—É—Å–ª–∞–º–∂ —Ö–∞—Ä—É—É–ª–∞—Ö
- `–±–∞—è—Ä—Ç–∞–π` - –Ø—Ä–∏–ª—Ü–ª–∞–≥–∞ –¥—É—É—Å–≥–∞—Ö

### –ß”©–ª”©”©—Ç —è—Ä–∏–ª—Ü–ª–∞–≥–∞

–¢–∞ —è–º–∞—Ä —á –∞—Å—É—É–ª—Ç –∞—Å—É—É–∂ –±–æ–ª–Ω–æ. AI –º–æ–Ω–≥–æ–ª —Ö—ç–ª—ç—ç—Ä —Ö–∞—Ä–∏—É–ª–Ω–∞.

## üåê API Endpoints

### Crawl —Å—Ç–∞—Ç—É—Å —à–∞–ª–≥–∞—Ö

```bash
GET /api/crawl-status
```

### –•“Ø—á—ç—ç—Ä —à“Ø“Ø—Ä–¥—ç—Ö

```bash
POST /api/force-crawl
```

### API-–∞–∞—Ä —Ö–∞–π–ª—Ç —Ö–∏–π—Ö

```bash
POST /api/search
Content-Type: application/json

{
  "query": "—Ö–∞–π—Ö “Ø–≥",
  "max_results": 5
}
```

### Health check

```bash
GET /health
```

### Crawl —Ö–∏–π—Å—ç–Ω ”©–≥”©–≥–¥”©–ª –∞–≤–∞—Ö

```bash
GET /api/crawled-data?limit=10
```

## üöÄ –≠—Ö–ª“Ø“Ø–ª—ç—Ö

1. Dependencies —Å—É—É–ª–≥–∞—Ö:

```bash
pip install flask requests openai beautifulsoup4 python-dotenv
```

2. Environment variables —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö

3. –ê–ø–ø–ª–∏–∫–µ–π—à–Ω —ç—Ö–ª“Ø“Ø–ª—ç—Ö:

```bash
python main.py
```

Server —ç—Ö–ª—ç—Ö—ç–¥ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —à“Ø“Ø—Ä–¥—ç–ª—Ç —ç—Ö–ª—ç–Ω—ç (AUTO_CRAWL_ON_START=true –±–æ–ª).

## üìä –°—Ç–∞—Ç—É—Å –º—ç–¥—ç—ç–ª—ç–ª

Crawl-–∏–π–Ω —Å—Ç–∞—Ç—É—Å:

- `not_started` - –≠—Ö–ª—ç—ç–≥“Ø–π
- `running` - –®“Ø“Ø—Ä–¥—ç–∂ –±–∞–π–Ω–∞
- `completed` - –ê–º–∂–∏–ª—Ç—Ç–∞–π –¥—É—É—Å—Å–∞–Ω
- `failed` - –ê–ª–¥–∞–∞—Ç–∞–π
- `disabled` - –ò–¥—ç–≤—Ö–≥“Ø–π

## üîß Production deployment

Gunicorn –∞—à–∏–≥–ª–∞–Ω:

```bash
gunicorn main:app --bind 0.0.0.0:8080
```

Docker –∞—à–∏–≥–ª–∞–Ω:

```dockerfile
FROM python:3.10-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
EXPOSE 8080
CMD ["gunicorn", "main:app", "--bind", "0.0.0.0:8080"]
```

## üõ°Ô∏è –ê–Ω—Ö–∞–∞—Ä–∞—Ö –∑“Ø–π–ª—Å

- OpenAI API —Ç“Ø–ª—Ö“Ø“Ø—Ä —Ö—ç—Ä—ç–≥—Ç—ç–π
- Chatwoot webhook URL —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π
- MAX_CRAWL_PAGES-—ã–≥ —Ö—ç—Ç—Ä“Ø“Ø–ª–±—ç–ª —É–¥–∞–∞–Ω –±–æ–ª–Ω–æ
- AUTO_CRAWL_ON_START=true –±–æ–ª startup —É–¥–∞–∞–Ω –±–∞–π–∂ –±–æ–ª–Ω–æ
