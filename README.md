# üìß –ò–º—ç–π–ª –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞–ª—Ç—Ç–∞–π Chatwoot Chatbot

–≠–Ω—ç —Å–∏—Å—Ç–µ–º –Ω—å —Ö—ç—Ä—ç–≥–ª—ç–≥—á–¥—ç—ç—Å —ç—Ö–ª—ç—ç–¥ –∏–º—ç–π–ª —Ö–∞—è–≥–∞–∞ –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞—Ö—ã–≥ —à–∞–∞—Ä–¥–∞–∂, –¥–∞—Ä–∞–∞ –Ω—å OpenAI Assistant-—Ç–æ–π —Ö–∞—Ä–∏–ª—Ü–∞—Ö –±–æ–ª–æ–º–∂–∏–π–≥ –æ–ª–≥–æ–¥–æ–≥.

## üöÄ –°–∏—Å—Ç–µ–º–∏–π–Ω –∞–∂–∏–ª–ª–∞–≥–∞–∞

1. **–•—ç—Ä—ç–≥–ª—ç–≥—á Chatwoot chatbot-–¥ –º–µ—Å—Å–µ–∂ –±–∏—á–Ω—ç**
2. **–°–∏—Å—Ç–µ–º–∞ –∏–º—ç–π–ª —Ö–∞—è–≥ —à–∞–∞—Ä–¥–∞–Ω–∞**
3. **–•—ç—Ä—ç–≥–ª—ç–≥—á –∏–º—ç–π–ª—ç—ç –æ—Ä—É—É–ª–Ω–∞**
4. **–°–∏—Å—Ç–µ–º–∞ —Ç—É—Ö–∞–π–Ω –∏–º—ç–π–ª —Ä“Ø“Ø –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞—Ö –ª–∏–Ω–∫ –∏–ª–≥—ç—ç–Ω—ç**
5. **–•—ç—Ä—ç–≥–ª—ç–≥—á –ª–∏–Ω–∫ –¥—ç—ç—Ä –¥–∞—Ä–∂ –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–Ω–∞**
6. **–ë–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª—Å–Ω—ã –¥–∞—Ä–∞–∞ chatbot –∞–∂–∏–ª–ª–∞–∂ —ç—Ö—ç–ª–Ω—ç**

## üìã –®–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π –∑“Ø–π–ª—Å

### Python packages

```bash
pip install -r requirements.txt
```

### –û—Ä—á–Ω—ã —Ö—É–≤—å—Å–∞–≥—á–∏–¥

`env_example.txt` —Ñ–∞–π–ª—ã–≥ `.env` –±–æ–ª–≥–æ–Ω —Ö—É—É–ª–∂, –¥–∞—Ä–∞–∞—Ö –º—ç–¥—ç—ç–ª–ª–∏–π–≥ –æ—Ä—É—É–ª–Ω–∞ —É—É:

- **OpenAI**: API key –±–æ–ª–æ–Ω Assistant ID
- **Chatwoot**: API key –±–æ–ª–æ–Ω Account ID
- **Gmail**: –ò–º—ç–π–ª –±–æ–ª–æ–Ω App Password
- **JWT Secret**: –ê—é—É–ª–≥“Ø–π —Ç“Ø–ª—Ö“Ø“Ø—Ä “Ø–≥
- **Verification URL**: –¢–∞–Ω—ã —Å–µ—Ä–≤—ç—Ä–∏–π–Ω —Ö–∞—è–≥

### Gmail —Ç–æ—Ö–∏—Ä–≥–æ–æ

1. Gmail –¥—ç—ç—Ä 2-Factor Authentication –∏–¥—ç–≤—Ö–∂“Ø“Ø–ª—ç—Ö
2. App Password “Ø“Ø—Å–≥—ç—Ö
3. `SENDER_EMAIL` –±–æ–ª–æ–Ω `SENDER_PASSWORD` —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö

## üîß –°—É—É–ª–≥–∞—Ö –∑–∞–∞–≤–∞—Ä

```bash
# 1. Repository –∫–ª–æ–Ω —Ö–∏–π—Ö
git clone <your-repo>
cd <your-repo>

# 2. Dependencies —Å—É—É–ª–≥–∞—Ö
pip install -r requirements.txt

# 3. Environment variables —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö
cp env_example.txt .env
# .env —Ñ–∞–π–ª—ã–≥ –∑–∞—Å–≤–∞—Ä–ª–∞–∂ ”©”©—Ä–∏–π–Ω –º—ç–¥—ç—ç–ª–ª—ç—ç—Ä –¥“Ø“Ø—Ä–≥—ç—Ö

# 4. –°–µ—Ä–≤–µ—Ä–∏–π–≥ –∞–∂–∏–ª–ª—É—É–ª–∞—Ö
python main.py
```

## üì° Webhook —Ç–æ—Ö–∏—Ä–≥–æ–æ

Chatwoot –¥—ç—ç—Ä webhook URL —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö:

```
http://your-domain.com/webhook
```

## üéØ –ê—à–∏–≥–ª–∞—Ö –∑–∞–∞–≤–∞—Ä

### –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω —Ö—É–≤—å–¥:

1. Chatwoot chatbot-–¥ –¥—É—Ä—ã–Ω –º–µ—Å—Å–µ–∂ –±–∏—á–∏—Ö
2. "–ó”©–≤ –∏–º—ç–π–ª —Ö–∞—è–≥–∞–∞ –±–∏—á—ç—ç–¥ –∏–ª–≥—ç—ç–Ω—ç “Ø“Ø" –≥—ç—Ö –º–µ—Å—Å–µ–∂ –∏—Ä–Ω—ç
3. –ò–º—ç–π–ª —Ö–∞—è–≥–∞–∞ –±–∏—á–∏—Ö (–∂–∏—à—ç—ç: `user@gmail.com`)
4. "–ò–º—ç–π–ª —Ä“Ø“Ø –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞—Ö –ª–∏–Ω–∫ –∏–ª–≥—ç—ç–ª—ç—ç" –≥—ç—Ö –º–µ—Å—Å–µ–∂ –∏—Ä–Ω—ç
5. –ò–º—ç–π–ª—ç—ç —à–∞–ª–≥–∞–∞–¥ –ª–∏–Ω–∫ –¥—ç—ç—Ä –¥–∞—Ä–∞—Ö
6. "–ê–º–∂–∏–ª—Ç—Ç–∞–π –±–∞—Ç–∞–ª–≥–∞–∞–∂–ª–∞–∞" —Ö—É—É–¥–∞—Å —Ö–∞—Ä–∞–≥–¥–∞–Ω–∞
7. Chatwoot –¥—ç—ç—Ä "–¢–∞–Ω—ã –∏–º—ç–π–ª –±–∞—Ç–∞–ª–≥–∞–∞–∂–ª–∞–∞!" –º–µ—Å—Å–µ–∂ –∏—Ä–Ω—ç
8. –û–¥–æ–æ chatbot-—Ç–æ–π —á–∞—Ç–ª–∞–∂ –±–æ–ª–Ω–æ

### –¢–µ—Ö–Ω–∏–∫–∏–π–Ω –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π:

- –•—ç—Ä—ç–≥–ª—ç–≥—á –±“Ø—Ä ”©”©—Ä–∏–π–Ω OpenAI thread-—Ç—ç–π
- –ò–º—ç–π–ª –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞—Ö —Ç–æ–∫–µ–Ω 24 —Ü–∞–≥–∏–π–Ω –¥–∞—Ä–∞–∞ –¥—É—É—Å–Ω–∞
- Chatwoot conversation –¥—ç—ç—Ä `email_verified` –±–æ–ª–æ–Ω `verified_contact_{contact_id}` —Ö–∞–¥–≥–∞–ª–∞–≥–¥–∞–Ω–∞

## üîí –ê—é—É–ª–≥“Ø–π –±–∞–π–¥–∞–ª

- JWT —Ç–æ–∫–µ–Ω –∞—à–∏–≥–ª–∞–Ω –∏–º—ç–π–ª –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞—Ö
- –¢–æ–∫–µ–Ω 24 —Ü–∞–≥–∏–π–Ω –¥–∞—Ä–∞–∞ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä –¥—É—É—Å–Ω–∞
- –•—ç—Ä—ç–≥–ª—ç–≥—á —Ç—É—Å –±“Ø—Ä–∏–π–Ω thread —Ç—É—Å–≥–∞–∞—Ä–ª–∞–≥–¥–º–∞–ª
- –ò–º—ç–π–ª format —à–∞–ª–≥–∞–≥–¥–¥–∞–≥

## üêõ –ê–ª–¥–∞–∞ –∑–∞—Å–≤–∞—Ä–ª–∞—Ö

–•—ç—Ä—ç–≤ –∞—Å—É—É–¥–∞–ª –≥–∞—Ä–≤–∞–ª:

1. Console –ª–æ–≥—É—É–¥—ã–≥ —à–∞–ª–≥–∞—Ö
2. Environment variables –∑”©–≤ —Ç–æ—Ö–∏—Ä—É—É–ª—Å–∞–Ω —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞—Ö
3. Gmail App Password –∑”©–≤ –∞—à–∏–≥–ª–∞–∂ –±–∞–π–≥–∞–∞ —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞—Ö
4. Chatwoot webhook URL –∑”©–≤ —Ç–æ—Ö–∏—Ä—É—É–ª—Å–∞–Ω —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞—Ö

## üìû –î—ç–º–∂–ª—ç–≥

–ê—Å—É—É–ª—Ç –±–∞–π–≤–∞–ª issue “Ø“Ø—Å–≥—ç–Ω—ç “Ø“Ø.

# Chatwoot AI Chatbot with Microsoft Teams Integration

Flask –¥—ç—ç—Ä –±–∏—á–∏–≥–¥—Å—ç–Ω Chatwoot webhook handler –±”©–≥”©”©–¥ OpenAI Assistant API –∞—à–∏–≥–ª–∞–Ω AI chatbot –∞–∂–∏–ª–ª—É—É–ª–¥–∞–≥. Microsoft Teams-—Ç—ç–π —Ö–æ–ª–±–æ–≥–¥–æ–∂ —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –∞—Å—É—É–¥–ª—ã–≥ AI-—ç—ç—Ä –¥“Ø–≥–Ω—ç–∂ –∞–∂–∏–ª—Ç–∞–Ω–¥ –∞–≤—Ç–æ–º–∞—Ç –º—ç–¥—ç—ç–ª–¥—ç–≥.

## –ë–æ–ª–æ–º–∂—É—É–¥

- ‚úÖ OpenAI Assistant API –∞—à–∏–≥–ª–∞–Ω AI chatbot
- ‚úÖ Email –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞–ª—Ç (JWT —Ç–æ–∫–µ–Ω)
- ‚úÖ Chatwoot API —Ö–æ–ª–±–æ–ª—Ç
- ‚úÖ **AI-—ç—ç—Ä –∞—Å—É—É–¥–∞–ª –¥“Ø–≥–Ω—ç—Ö —Å–∏—Å—Ç–µ–º**
- ‚úÖ Microsoft Teams –∞–≤—Ç–æ–º–∞—Ç –º—ç–¥—ç—ç–ª—ç—Ö
- ‚úÖ –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –∞—Å—É—É–¥–ª—ã–≥ AI-—ç—ç—Ä —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–∂, —Å—Ç—Ä—É–∫—Ç—É—Ä—á–∏–ª—Å–∞–Ω –º—ç–¥—ç—ç–ª—ç–ª ”©–≥”©—Ö

## –®–∏–Ω—ç –±–æ–ª–æ–º–∂: AI –ê—Å—É—É–¥–∞–ª –î“Ø–≥–Ω—ç—Ö –°–∏—Å—Ç–µ–º

### –•—ç—Ä—Ö—ç–Ω –∞–∂–∏–ª–ª–∞–¥–∞–≥:

1. **–•—ç—Ä—ç–≥–ª—ç–≥—á –∞—Å—É—É–ª—Ç –∞—Å—É—É—Ö** ‚Üí AI —Ö–∞—Ä–∏—É–ª—Ç ”©–≥”©—Ö
2. **AI –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö–∞—Ä–∏—É–ª—Ç ”©–≥”©—Ö** ‚Üí –ê—Å—É—É–¥–ª—ã–≥ –¥“Ø–≥–Ω—ç–∂ Teams-–¥ –∏–ª–≥—ç—ç—Ö
3. **–ê–∂–∏–ª—Ç–∞–Ω Teams –¥—ç—ç—Ä –¥“Ø–≥–Ω—ç–ª—Ç —Ö–∞—Ä–∞—Ö** ‚Üí –¢–æ—Ö–∏—Ä–æ—Ö –∞—Ä–≥–∞ —Ö—ç–º–∂—ç—ç –∞–≤–∞—Ö

### AI –¥“Ø–≥–Ω—ç–ª—Ç–∏–π–Ω –∞–≥—É—É–ª–≥–∞:

```
–ê–°–£–£–î–õ–´–ù –¢”®–†”®–õ: [—Ç–µ—Ö–Ω–∏–∫–∏–π–Ω/—Ö—É–¥–∞–ª–¥–∞–∞–Ω—ã/–¥—ç–º–∂–ª—ç–≥–∏–π–Ω –∞—Å—É—É–¥–∞–ª]
–Ø–ê–†–ê–õ–¢–ê–ô –ë–ê–ô–î–ê–õ: [”®–Ω–¥”©—Ä/–î—É–Ω–¥/–ë–∞–≥–∞]
–ê–°–£–£–î–õ–´–ù –¢–û–í–ß –¢–ê–ô–õ–ë–ê–†: [1-2 ”©–≥“Ø“Ø–ª–±—ç—Ä—ç—ç—Ä —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–æ–ª—Ç]
–®–ê–ê–†–î–õ–ê–ì–ê–¢–ê–ô –ê–†–ì–ê –•–≠–ú–ñ–≠–≠: [—è–º–∞—Ä –∞—Ä–≥–∞ —Ö—ç–º–∂—ç—ç –∞–≤–∞—Ö —Ö—ç—Ä—ç–≥—Ç—ç–π]
–•“Æ–õ–≠–≠–ì–î–≠–ñ –ë–£–ô –•–ê–†–ò–£–õ–¢: [—Ö—ç—Ä—ç–≥–ª—ç–≥—á —è–º–∞—Ä —Ö–∞—Ä–∏—É–ª—Ç —Ö“Ø–ª—ç—ç–∂ –±–∞–π–≥–∞–∞]
```

### Teams –º—ç–¥—ç—ç–ª–ª–∏–π–Ω –∂–∏—à—ç—ç:

```
üìã –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –∞—Å—É—É–¥–ª—ã–Ω –¥“Ø–≥–Ω—ç–ª—Ç

AI —Å–∏—Å—Ç–µ–º —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –∞—Å—É—É–¥–ª—ã–≥ –¥“Ø–≥–Ω—ç–∂, –∞–∂–∏–ª—Ç–Ω—ã –∞–Ω—Ö–∞–∞—Ä–∞–ª —Ç–∞—Ç–∞—Ö—É–π—Ü –∞—Å—É—É–¥–∞–ª –≥—ç–∂ “Ø–∑—ç–∂ –±–∞–π–Ω–∞.

–•–∞—Ä–∏–ª—Ü–∞–≥—á: customer@email.com
–•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –º–µ—Å—Å–µ–∂: –ú–∞–Ω–∞–π –∫–æ–º–ø–∞–Ω–∏–π–Ω —Ç—É—Ö–∞–π –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π –º—ç–¥—ç—ç–ª—ç–ª –∞–≤–∞—Ö—ã–≥ —Ö“Ø—Å—á –±–∞–π–Ω–∞...
–•—É–≥–∞—Ü–∞–∞: 2024-01-15 14:30:00

ü§ñ AI –î“Ø–≥–Ω—ç–ª—Ç:
–ê–°–£–£–î–õ–´–ù –¢”®–†”®–õ: –ú—ç–¥—ç—ç–ª–ª–∏–π–Ω —Ö“Ø—Å—ç–ª—Ç
–Ø–ê–†–ê–õ–¢–ê–ô –ë–ê–ô–î–ê–õ: –î—É–Ω–¥
–ê–°–£–£–î–õ–´–ù –¢–û–í–ß –¢–ê–ô–õ–ë–ê–†: –•—ç—Ä—ç–≥–ª—ç–≥—á –∫–æ–º–ø–∞–Ω–∏–π–Ω —Ç—É—Ö–∞–π –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π –º—ç–¥—ç—ç–ª—ç–ª –∞–≤–∞—Ö—ã–≥ —Ö“Ø—Å—á –±–∞–π–Ω–∞.
–®–ê–ê–†–î–õ–ê–ì–ê–¢–ê–ô –ê–†–ì–ê –•–≠–ú–ñ–≠–≠: –ö–æ–º–ø–∞–Ω–∏–π–Ω —Ç–∞–Ω–∏–ª—Ü—É—É–ª–≥–∞ –º–∞—Ç–µ—Ä–∏–∞–ª –∏–ª–≥—ç—ç—Ö
–•“Æ–õ–≠–≠–ì–î–≠–ñ –ë–£–ô –•–ê–†–ò–£–õ–¢: –ö–æ–º–ø–∞–Ω–∏–π–Ω “Ø–π–ª –∞–∂–∏–ª–ª–∞–≥–∞–∞, –±“Ø—Ç—ç—ç–≥–¥—ç—Ö“Ø“Ø–Ω “Ø–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π —Ç—É—Ö–∞–π –º—ç–¥—ç—ç–ª—ç–ª

[Chatwoot –¥—ç—ç—Ä —Ö–∞—Ä–∞—Ö] —Ç–æ–≤—á
```

## –¢–æ—Ö–∏—Ä–≥–æ–æ

`main.py` —Ñ–∞–π–ª–¥ –¥–∞—Ä–∞–∞—Ö —Ç–æ—Ö–∏—Ä–≥–æ–æ–Ω—É—É–¥—ã–≥ ”©”©—Ä—á–ª”©—Ö –±–æ–ª–æ–º–∂—Ç–æ–π:

```python
# AI —Ö—ç–¥—ç–Ω —É–¥–∞–∞ –æ—Ä–æ–ª–¥—Å–æ–Ω—ã –¥–∞—Ä–∞–∞ —Ç–µ—Ö–Ω–∏–∫–∏–π–Ω –±–∞–≥—Ç –º—ç–¥—ç—ç–ª—ç—Ö
MAX_AI_RETRIES = 2
```

## Microsoft Teams —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö

### 1. Teams Webhook URL “Ø“Ø—Å–≥—ç—Ö

1. Microsoft Teams –¥—ç—ç—Ä team/channel —Å–æ–Ω–≥–æ—Ö
2. Channel –¥—ç—ç—Ä **"Connectors"** —Ç–æ–≤—á –¥–∞—Ä–∞—Ö
3. **"Incoming Webhook"** —Ö–∞–π–∂ –æ–ª–æ—Ö
4. **"Configure"** –¥–∞—Ä–∞—Ö
5. Webhook-–¥ –Ω—ç—Ä ”©–≥”©—Ö (–∂–Ω—å: "AI As—É—É–¥–ª—ã–Ω –¥“Ø–≥–Ω—ç–ª—Ç")
6. **"Create"** –¥–∞—Ä–∞—Ö
7. “Æ“Ø—Å—Å—ç–Ω webhook URL-–≥ —Ö—É—É–ª–∂ –∞–≤–∞—Ö

### 2. Environment Variable —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö

`.env` —Ñ–∞–π–ª–¥–∞–∞ Teams webhook URL –Ω—ç–º—ç—Ö:

```
TEAMS_WEBHOOK_URL=https://your-org.webhook.office.com/webhookb2/...
```

### 3. –•—ç–∑—ç—ç Teams –º—ç–¥—ç—ç–ª—ç–ª –∏—Ä—ç—Ö:

- **–ë“Ø—Ö —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –∞—Å—É—É–ª—Ç** ‚Üí AI —Ö–∞—Ä–∏—É–ª—Ç ”©–≥”©—Ö ‚Üí AI –¥“Ø–≥–Ω—ç–ª—Ç Teams-–¥ –∏–ª–≥—ç—ç—Ö
- **AI –∞–ª–¥–∞–∞ –≥–∞—Ä–≤–∞–ª** ‚Üí –¢–µ—Ö–Ω–∏–∫–∏–π–Ω –º—ç–¥—ç—ç–ª—ç–ª Teams-–¥ –∏–ª–≥—ç—ç—Ö

## –°—É—É–ª–≥–∞—Ö –∑–∞–∞–≤–∞—Ä

### 1. Dependencies —Å—É—É–ª–≥–∞—Ö

```bash
pip install -r requirements.txt
```

### 2. Environment variables —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö

```bash
cp env_example.txt .env
# .env —Ñ–∞–π–ª—ã–≥ –∑–∞—Å–∞–∂ –±“Ø—Ö —É—Ç–≥—É—É–¥—ã–≥ –æ—Ä—É—É–ª–∞—Ö
```

### 3. –ê–∂–∏–ª–ª—É—É–ª–∞—Ö

```bash
python main.py
```
